<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Студенты</title>
    <link href="css/site.css" rel="stylesheet" />
    <script src="js/site.js"></script>
</head>
<body>


<h3> Студенты </h3>
<div id="students"> </div>


<script> 

    const students = document.getElementById("students");
    const table = document.createElement('table');
    table.className = "students";

    const columns = [
        { "id": "id", "name": "Id" },
        { "id": "name", "name": "Имя" },
        { "id": "email", "name": "Эл. почта" },
        { "id": "isReady", "name": "isReady" }
    ];

    let records = '<tr>';
    columns.forEach(col => records += `<th class=${col.id}>${col.name}</th>`)
    records += '</tr>';

    //students.innerHTML = "students list";

    const url = location.origin + "/students"; //"https://localhost:7203/students";


    fetch(url,
        { method: "GET" }).
        then((resp) => resp.json()).
        then((data) => {
            //console.log(data);

            data.forEach(student => {
                console.log(student);
                records += '<tr>';
                columns.forEach(col => records += `<td class=${col.id}>${student[col.id]}</td>`);
                records += '</tr>';
            });
            console.log('fetch:', records);
            table.innerHTML = records;
            students.appendChild(table);
        });

    console.log("main:", records);

    //table.innerHTML = records;
    //students.appendChild(table);
    </script>

</body>
</html>